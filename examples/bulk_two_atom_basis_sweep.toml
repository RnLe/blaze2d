# Two-atom basis position sweep
# Sweeps second atom position to study band gap vs displacement
# Total: 2 pol × 7 pos_x × 7 pos_y = 98 jobs

[bulk]
threads = 8
verbose = true

[solver]
type = "maxwell"

[defaults]
eps_bg = 11.9
resolution = 48

[[sweeps]]
parameter = "polarization"
values = ["TM", "TE"]

[[sweeps]]
parameter = "atom1.pos_x"
min = 0.1
max = 0.4
step = 0.05

[[sweeps]]
parameter = "atom1.pos_y"
min = 0.1
max = 0.4
step = 0.05

[geometry]
eps_bg = 11.9

[geometry.lattice]
type = "square"
a = 1.0

# Atom 0: fixed at center
[[geometry.atoms]]
pos = [0.5, 0.5]
radius = 0.15
eps_inside = 1.0

# Atom 1: position swept
[[geometry.atoms]]
pos = [0.25, 0.25]
radius = 0.15
eps_inside = 1.0

[grid]
nx = 48
ny = 48
lx = 1.0
ly = 1.0

[path]
preset = "square"
segments_per_leg = 12

[eigensolver]
n_bands = 10
max_iter = 200
tol = 1e-6

[output]
mode = "selective"
filename = "./two_atom_basis_sweep.csv"

[output.selective]
k_indices = [0, 12, 24]
bands = [1, 2, 3, 4, 5, 6, 7, 8]
