# ==============================================================================
# Selective Output Example for Band Gap Studies
# ==============================================================================
# This example outputs only specific k-points and bands to a single merged file.
# Ideal for studying band gap evolution with parameter changes.

[bulk]
threads = 4
verbose = true

[geometry]
eps_bg = 13.0

[geometry.lattice]
type = "square"
a = 1.0

[[geometry.atoms]]
pos = [0.5, 0.5]
radius = 0.3
eps_inside = 1.0

[grid]
nx = 32
ny = 32
lx = 1.0
ly = 1.0

polarization = "TM"

[path]
preset = "square"
segments_per_leg = 10

[eigensolver]
n_bands = 8
max_iter = 200
tol = 1e-6

[dielectric.smoothing]
mesh_size = 4

# ============================================================================
# Parameter Ranges
# ============================================================================

[ranges]
# Small sweep: eps_bg × radius
eps_bg = { min = 10.0, max = 14.0, step = 2.0 }

[[ranges.atoms]]
radius = { min = 0.2, max = 0.4, step = 0.1 }

# ============================================================================
# Selective Output Configuration
# ============================================================================

[output]
mode = "selective"
filename = "./band_gap_analysis.csv"

[output.selective]
# High-symmetry points for square lattice (with segments_per_leg = 10):
#   Γ = index 0
#   X = index 10
#   M = index 20
#   Γ = index 30
k_indices = [0, 10, 20]

# First 5 bands (for TM gap between bands 1 and 2)
bands = [1, 2, 3, 4, 5]
