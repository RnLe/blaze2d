# Envelope Approximation (EA) solver for moiré lattices
# Solves: H ψ = E ψ  where  H = V(R) - (η²/2) ∇·M⁻¹(R)∇

[bulk]
threads = 4
verbose = true

[solver]
type = "ea"

[ea]
# Binary input files (f64 little-endian, row-major)
potential = "data/potential_64x64.bin"    # Nx×Ny f64
mass_inv = "data/mass_inv_64x64.bin"      # Nx×Ny×4 f64 [m_xx, m_xy, m_yx, m_yy]
# vg = "data/group_velocity_64x64.bin"    # Optional drift term

eta = 0.1              # Small parameter for kinetic term
domain_size = [10.0, 10.0]
periodic = true

[grid]
nx = 64
ny = 64
lx = 10.0
ly = 10.0

[eigensolver]
n_bands = 12
max_iter = 500
tol = 1e-6

[output]
mode = "full"
directory = "./ea_output"
prefix = "ea_job"
