# Bulk parameter sweep example using ordered [[sweeps]] syntax
# Sweeps execute in TOML order: radius (outer) → eps_bg → polarization (inner)
# Total: 5 radii × 5 eps × 2 pol = 50 jobs

[bulk]
threads = 8
verbose = true

[solver]
type = "maxwell"

# =============================================================================
# DEFAULTS - Base values used when parameter is NOT being swept
# =============================================================================

[defaults]
eps_bg = 12.0
resolution = 32
polarization = "TM"
lattice_type = "square"

# =============================================================================
# ORDERED SWEEPS - First sweep = outermost loop
# =============================================================================

[[sweeps]]
parameter = "atom0.radius"
min = 0.2
max = 0.4
step = 0.05

[[sweeps]]
parameter = "eps_bg"
min = 10.0
max = 14.0
step = 1.0

[[sweeps]]
parameter = "polarization"
values = ["TM", "TE"]

# =============================================================================
# GEOMETRY - Static structure (swept params use defaults)
# =============================================================================

[geometry]
[geometry.lattice]
type = "square"
a = 1.0

[[geometry.atoms]]
pos = [0.5, 0.5]
radius = 0.3
eps_inside = 1.0

[grid]
nx = 32
ny = 32
lx = 1.0
ly = 1.0

[path]
preset = "square"
segments_per_leg = 12

[eigensolver]
n_bands = 8
max_iter = 200
tol = 1e-4

[dielectric.smoothing]
mesh_size = 4

[output]
mode = "full"
directory = "./bulk_output"
prefix = "sweep"
