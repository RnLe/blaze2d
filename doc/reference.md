# reference

**Status:** Provides JSON loaders for MPB/Meep band snapshots used in validation.

## Responsibilities

- `load_reference_dataset` reads a JSON file containing sampled k-points and band values (as generated by the Python MPB scripts).
- The returned struct exposes `k_path`, optional `k_nodes`, and the band matrix for downstream validation.

## Usage

```rust
use mpb2d_core::reference::load_reference_dataset;
let dataset = load_reference_dataset("python/reference-data/square_tm_uniform_mpb.json")?;
assert_eq!(dataset.bands.len(), dataset.k_path.len());
```

## Gaps / Next Steps

- Extend the schema with explicit units/normalization metadata to ensure future 3D datasets remain comparable.
- Consider streaming large datasets instead of loading entirely into memory once GPU-scale references are introduced.
- Add CLI helper to pick between MPB-generated files and analytic fallbacks automatically.
- Document and expose helpers for selecting the right polarization when multiple reference files (TM/TE) exist.
